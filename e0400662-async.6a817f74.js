(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["e0400662"],{"8a5f3595":function(e,l,a){a.d(l,"__esModule",{value:!0}),a.e(l,{default:function(){return A;}});var t=a("777fffbe"),d=a("852bbaa9"),n=a("f4b09fb4"),o=a("1d411c56"),i=t._(o),r=a("df3d9a4f"),s=t._(r),c=a("2d7d3a34"),u=t._(c),m=a("0c33dad5"),b=a("933cd465"),f=a("525e6c6e"),v=a("0e79c561"),h=t._(v),g=a("ceddffbc"),p=t._(g),x=a("b5768612"),_=t._(x),y=a("203e9b38"),j=t._(y),k=a("068a2763"),T=t._(k),S=a("b46f27b6"),C=t._(S),I=a("95e87ac7"),F=t._(I),R=a("8cb667cb"),w=t._(R),E=a("7d758359"),U=d._(E),M=a("04b48da5"),O=a("8677cc4f"),P=a("dc01743b");let D=({role_id:e})=>{switch(e){case 1:return(0,n.jsx)(w.default,{color:"gold",children:P.SYSTEM_ROLE[e]});case 2:return(0,n.jsx)(w.default,{color:"cyan",children:P.SYSTEM_ROLE[e]});case 3:return(0,n.jsx)(w.default,{color:"default",children:P.SYSTEM_ROLE[e]});}};var L=a("0d7d3790");let{RangePicker:Y}=_.default,A=()=>{var e;let{initialState:l}=(0,f.useModel)("@@initialState"),a=(0,U.useRef)(),{formatMessage:t}=(0,f.useIntl)(),{paginationConfig:d,savePageList:o}=(0,i.default)(),r=[{title:"No.",key:"index",width:60,hideInSearch:!0,render:(e,l,a)=>a+1+(d.current-1)*d.pageSize},{title:"Username",dataIndex:"username",key:"username",copyable:!0},{title:"Email",dataIndex:"email",key:"email",copyable:!0},{title:"Phone Number",dataIndex:"phone_number",key:"phone_number",formItemProps:{labelCol:{xxl:8}}},{title:t({id:"component.global.status"}),dataIndex:"active",key:"active",valueType:"select",fieldProps:{options:[{label:t({id:"component.global.active"}),value:!0},{label:t({id:"component.global.inactive"}),value:!1}]},render:(e,l)=>(0,n.jsx)(w.default,{color:l.active?"green":"red",children:l.active?t({id:"component.global.active"}):t({id:"component.global.inactive"})})},{title:"Role",dataIndex:"role_id",key:"role_id",valueType:"select",fieldProps:{options:[{label:P.SYSTEM_ROLE[1],value:1},{label:P.SYSTEM_ROLE[2],value:2},{label:P.SYSTEM_ROLE[3],value:3}]},render:(e,l)=>(0,n.jsx)(D,{role_id:l.role_id})},{title:t({id:"component.global.created_at"}),dataIndex:"created_at",key:"created_at",valueType:"dateTimeRange",search:{transform:e=>{var l,a;return{start_time:(0,L.FormatInputTime)(null===(l=e[0])||void 0===l?void 0:l.valueOf()),end_time:(0,L.FormatInputTime)(null===(a=e[1])||void 0===a?void 0:a.valueOf())};}},renderFormItem:(e,{type:l,defaultRender:a,...t})=>{let d={...t,mode:void 0};return(0,n.jsx)(Y,{showTime:!0,...d});},render:(e,l)=>(0,L.RenderTime)(l.created_at)},{fixed:"right",title:t({id:"component.global.actions"}),key:"actions",width:80,hideInSearch:!0,render:(e,l,a)=>(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:v(l,a)})}],c=(e,a)=>{var d,n,o,i;return[{key:"view",label:t({id:"component.global.view"}),onClick:()=>N(e)},...(null==l?void 0:null===(d=l.currentUser)||void 0===d?void 0:d.role_id)===1||(null==l?void 0:null===(n=l.currentUser)||void 0===n?void 0:n.role_id)&&(null==l?void 0:null===(o=l.currentUser)||void 0===o?void 0:o.role_id)<e.role_id?[{key:"edit",label:t({id:"component.global.edit"}),onClick:()=>S(e)},...(null==l?void 0:null===(i=l.currentUser)||void 0===i?void 0:i.id)!==e.id?[{key:"reset_password",label:t({id:"page.admin.users.reset_password"}),onClick:()=>$(e)},{key:"toggle",label:e.active?t({id:"component.global.deactivate"}):t({id:"component.global.activate"}),onClick:()=>{e.active?F.default.confirm({title:"Are you sure you want to Deactivate this user?",okText:"Yes, Deactivate",okType:"danger",cancelText:"Cancel",onOk:()=>{B(e.id,!1);}}):B(e.id,!0);}},{key:"delete",label:t({id:"component.global.delete"}),danger:!0,onClick:()=>I(e,a)}]:[]]:[]];},v=(e,l)=>(0,n.jsx)(T.default,{menu:{items:c(e,l)},trigger:["hover"],children:(0,n.jsx)(h.default,{icon:(0,n.jsx)(s.default,{}),type:"dashed"})}),[g,x]=(0,U.useState)(!1),[_,y]=(0,U.useState)(),k=()=>{y(void 0),x(!0);},S=e=>{y(e),x(!0);},I=(e,l)=>{F.default.confirm({title:"Are you sure you want to delete this data?",content:`This action cannot be undone. Deleting ${e.full_name}.`,okText:"Yes, Delete",okType:"danger",cancelText:"Cancel",onOk:()=>{(0,M.remove)(e.id).then(()=>{(0,L.handlePageAfterDelete)(a,o,l),C.default.success("User deleted successfully!");});}});},[R,E]=(0,U.useState)(),[A,z]=(0,U.useState)(!1),N=e=>{E(e),z(!0);},B=(e,l)=>{(0,M.updateStatus)(e,l).then(()=>{var e;null===(e=a.current)||void 0===e||e.reload(),C.default.success("Status updated successfully!");});},[q,K]=(0,U.useState)(!1),$=e=>{y(e),K(!0);};return(0,n.jsx)(m.PageContainer,{children:(0,n.jsxs)(p.default,{style:{borderRadius:8},bodyStyle:{backgroundImage:(null==l?void 0:null===(e=l.settings)||void 0===e?void 0:e.navTheme)==="realDark"?"linear-gradient(75deg, #1A1B1F 0%, #191C1F 100%)":"linear-gradient(75deg, #FBFDFF 0%, #F5F7FF 100%)"},children:[(0,n.jsx)(b.ProTable,{rowKey:"id",columns:r,actionRef:a,request:M.fetchList,pagination:{onChange:(e,l)=>o(e,l),pageSize:d.pageSize,current:d.current,showSizeChanger:!0},search:{searchText:t({id:"component.global.search"}),resetText:t({id:"component.global.reset"})},toolBarRender:()=>[(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.default,{type:"primary",onClick:k,children:[(0,n.jsx)(u.default,{}),t({id:"page.admin.users.addUser"})]})})],scroll:{x:1100}}),(0,n.jsx)(O.UserModal,{visible:g,onCancel:()=>x(!1),onSave:e=>{var l;null===(l=a.current)||void 0===l||l.reload(),x(!1);},data:_}),(0,n.jsx)(O.ChangePasswordModal,{visible:q,mode:"reset",onCancel:()=>K(!1),onSave:()=>K(!1),id:null==_?void 0:_.id}),(0,n.jsx)(F.default,{open:A,title:"User Details",onCancel:()=>z(!1),maskClosable:!1,footer:[(0,n.jsx)(h.default,{onClick:()=>z(!1),children:"Close"},"close")],children:R&&(0,n.jsxs)(j.default,{column:1,bordered:!0,children:[(0,n.jsx)(j.default.Item,{label:"Full Name",children:R.full_name}),(0,n.jsx)(j.default.Item,{label:"Username",children:R.username}),(0,n.jsx)(j.default.Item,{label:"Email",children:R.email}),(0,n.jsx)(j.default.Item,{label:"Phone Number",children:R.phone_number}),(0,n.jsx)(j.default.Item,{label:t({id:"component.global.status"}),children:R.active?(0,n.jsx)(w.default,{color:"green",children:t({id:"component.global.active"})}):(0,n.jsx)(w.default,{color:"red",children:t({id:"component.global.inactive"})})}),(0,n.jsx)(j.default.Item,{label:"Role",children:(0,n.jsx)(D,{role_id:R.role_id})}),(0,n.jsx)(j.default.Item,{label:"2FA Status",children:(0,n.jsx)(w.default,{color:R.twofa_status?"blue":"gray",children:R.twofa_status?t({id:"component.global.enable"}):t({id:"component.global.disable"})})}),(0,n.jsx)(j.default.Item,{label:"Created At",children:(0,L.RenderTime)(R.created_at)}),(0,n.jsx)(j.default.Item,{label:"Last Updated",children:(0,L.RenderTime)(R.last_updated_at)})]})})]})});};}}]);
//# sourceMappingURL=e0400662-async.6a817f74.js.map