(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["2569f031"],{"6da0248d":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.d(t,"default",{enumerable:!0,get:function(){return S;}});var s=a("777fffbe"),l=a("852bbaa9"),d=a("f4b09fb4"),i=a("7d758359"),r=l._(a("5d166502")),n=s._(a("6eaa3fb7")),u=a("525e6c6e"),f=a("c1fa495e"),c=a("0c33dad5"),h=s._(a("50e899a9")),o=s._(a("ceddffbc")),m=s._(a("27dd779e")),x=s._(a("b5768612")),y=s._(a("29b2ae78")),g=s._(a("f9bca5f2")),p=s._(a("0f627bf2")),j=s._(a("e53ddd72")),b=a("0d7d3790"),_=s._(a("770b3724"));let{RangePicker:T}=x.default,{Title:O}=j.default;var S=()=>{let{formatMessage:e}=(0,u.useIntl)(),{id:t}=(0,u.useParams)(),[a,s]=(0,i.useState)(),[l,x]=(0,i.useState)(!1),j=(0,b.getTimeNowStartOfDay)(),S=(0,b.getTimeOneMonthLaterStartOfDay)(),[C,v]=(0,i.useState)([j,S]);(0,i.useEffect)(()=>{t&&(x(!0),(0,f.fetchItem)(t).then(e=>{s(e),v([(0,b.transformTimestampToDayjs)(e.start_time),(0,b.transformTimestampToDayjs)(e.end_time)]),x(!1);}).catch(()=>x(!1)));},[t]);let[k,D]=(0,i.useState)(0),[E,G]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=Z(C);a&&e&&(G(!0),(0,f.fetchTotalRegistered)(a.id,e.start_time,e.end_time).then(e=>{D(e),G(!1);}).catch(()=>G(!1)));},[a,C]);let[R,I]=(0,i.useState)(0),[L,A]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=Z(C);a&&e&&(A(!0),(0,f.fetchTotalMailSent)(a.id,e.start_time,e.end_time).then(e=>{I(e),A(!1);}).catch(()=>A(!1)));},[a,C]);let[z,M]=(0,i.useState)(0),[N,P]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=Z(C);a&&e&&(P(!0),(0,f.fetchTotalCheckIn)(a.id,e.start_time,e.end_time).then(e=>{M(e),P(!1);}).catch(()=>P(!1)));},[a,C]);let[U,B]=(0,i.useState)(0),[F,w]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=Z(C);a&&e&&(w(!0),(0,f.fetchTotalCheckOut)(a.id,e.start_time,e.end_time).then(e=>{B(e),w(!1);}).catch(()=>w(!1)));},[a,C]);let[H,K]=(0,i.useState)([]),[V,q]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=Z(C);a&&e&&(q(!0),(0,f.fetchRangeTotalValues)(a.id,e.start_time,e.end_time).then(e=>{e&&K((0,b.transformToLineChartSeries)(e,1)),q(!1);}).catch(()=>q(!1)));},[a,C]);let[J,Q]=(0,i.useState)([]),[W,X]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=Z(C);a&&e&&(X(!0),(0,f.fetchTotalRegisteredByGuestGroup)(a.id,e.start_time,e.end_time).then(e=>{e&&Q(Y(e)),X(!1);}).catch(()=>X(!1)));},[a,C]);let Y=e=>{let t=[];return e.forEach(e=>{t.push([e.name,e.total_guest_registered]);}),[{type:"column",name:"Registrations",data:t,colorByPoint:!0}];},Z=e=>!!e&&!!e[0]&&!!e[1]&&{start_time:(0,b.FormatInputTime)((0,_.default)(e[0]).startOf("day")),end_time:(0,b.FormatInputTime)((0,_.default)(e[1]).add(1,"day").startOf("day"))},$=[{label:"Last Day",value:[(0,_.default)().startOf("day").add(-1,"d"),(0,_.default)().startOf("day")]},{label:"Last 7 Days",value:[(0,_.default)().startOf("day").add(-7,"d"),(0,_.default)().startOf("day")]},{label:"Last 14 Days",value:[(0,_.default)().startOf("day").startOf("day").add(-14,"d"),(0,_.default)().startOf("day").startOf("day")]},{label:"Last 30 Days",value:[(0,_.default)().startOf("day").startOf("day").add(-30,"d"),(0,_.default)().startOf("day").startOf("day")]},{label:"Last 90 Days",value:[(0,_.default)().startOf("day").startOf("day").add(-90,"d"),(0,_.default)().startOf("day").startOf("day")]}],ee={maxHeight:146},et=()=>(0,d.jsxs)(h.default,{children:[(0,d.jsx)(h.default.Item,{href:"/events",children:e({id:"menu.events"})}),(0,d.jsx)(h.default.Item,{children:null==a?void 0:a.name})]});return(0,d.jsx)(c.PageContainer,{title:(0,d.jsxs)(p.default,{direction:"horizontal",size:"large",children:[(0,d.jsx)(O,{level:4,children:null==a?void 0:a.name}),(0,d.jsx)(T,{style:{marginTop:-10,display:"flex"},value:C,onChange:e=>v(e),disabledDate:e=>{if(!C||!C[0])return!1;let t=C[0].add(100,"day");return e.isAfter(t,"day");},presets:$})]}),breadcrumbRender:()=>(0,d.jsx)(et,{}),loading:l,children:(0,d.jsxs)("div",{style:{padding:"20px"},children:[(0,d.jsxs)(y.default,{gutter:[16,16],children:[(0,d.jsx)(m.default,{xs:24,md:12,lg:6,children:(0,d.jsx)(o.default,{title:"Registered Users",bordered:!1,loading:E,style:ee,children:(0,d.jsx)("h2",{children:k})})}),(0,d.jsx)(m.default,{xs:24,md:12,lg:6,children:(0,d.jsx)(o.default,{title:"Emails Sent",bordered:!1,loading:L,style:ee,children:(0,d.jsx)("h2",{children:R})})}),(0,d.jsx)(m.default,{xs:24,md:12,lg:6,children:(0,d.jsx)(o.default,{title:"Check-ins",bordered:!1,loading:N,style:ee,children:(0,d.jsx)("h2",{children:z})})}),(0,d.jsx)(m.default,{xs:24,md:12,lg:6,children:(0,d.jsx)(o.default,{title:"Check-outs",bordered:!1,loading:F,style:ee,children:(0,d.jsx)("h2",{children:U})})})]}),(0,d.jsxs)(y.default,{gutter:16,style:{marginTop:"20px"},children:[(0,d.jsxs)(m.default,{xs:24,lg:16,children:[V?(0,d.jsx)(g.default,{}):null,V?null:(0,d.jsx)(n.default,{highcharts:r,options:{chart:{type:"line",zoomType:"x",panning:!0,panKey:"shift"},title:{text:"Email Sent & Guest Registrations Over Time"},xAxis:{type:"datetime",title:{text:"Time"}},yAxis:{title:{text:"Count"}},series:H,tooltip:{shared:!0,crosshairs:!0},time:{useUTC:!1}}})]}),(0,d.jsxs)(m.default,{xs:24,lg:8,children:[N||E?(0,d.jsx)(g.default,{}):null,N||E?null:(0,d.jsx)(n.default,{highcharts:r,options:{chart:{type:"pie"},title:{text:"Check-in % of Registered Guest"},colors:["#3498db","#e74c3c"],series:[{name:"Guest",type:"pie",data:[{name:"Checked-in",y:z},{name:"Not Checked-in",y:k-z}]}]}})]})]}),(0,d.jsxs)(y.default,{gutter:16,style:{marginTop:"20px"},children:[(0,d.jsxs)(m.default,{xs:24,lg:12,children:[N||F?(0,d.jsx)(g.default,{}):null,N||F?null:(0,d.jsx)(n.default,{highcharts:r,options:{chart:{type:"pie"},title:{text:"Check-out % of Checked-in Guest"},colors:["#f39c12","#2ecc71"],series:[{name:"Users",type:"pie",data:[{name:"Checked-out",y:U},{name:"Still Checked-in",y:z-U}]}]}})]}),(0,d.jsxs)(m.default,{xs:24,lg:12,children:[W?(0,d.jsx)(g.default,{}):null,W?null:(0,d.jsx)(n.default,{highcharts:r,options:{chart:{type:"column"},title:{text:"Guest Registrations by Group"},xAxis:{type:"category"},yAxis:{title:{text:"Number of Guests"}},series:J,legend:{enabled:!1}}})]})]})]})});};}}]);
//# sourceMappingURL=2569f031-async.52e24d3c.js.map